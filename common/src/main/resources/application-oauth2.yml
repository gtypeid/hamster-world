# OAuth2 Resource Server 공통 설정
# 모든 서비스에서 spring.config.import로 포함하여 사용
#
# 사용법:
# application.yml에 다음 추가:
# spring:
#   config:
#     import:
#       - classpath:application-kafka.yml
#       - classpath:application-oauth2.yml

spring:
  # Keycloak OAuth2 Resource Server 설정
  # [주의] issuer-uri와 jwk-set-uri가 동시에 존재하면
  # Spring이 issuer-uri로 issuer 문자열 검증을 수행한다.
  # AWS에서 issuer 불일치(퍼블릭IP vs 프라이빗IP) 문제를 방지하기 위해
  # issuer-uri는 여기에 두지 않고 프로파일별 설정에서 관리한다.
  # - 로컬: application-oauth2-local.yml (issuer-uri 사용)
  # - AWS:  application-oauth2-aws.yml   (jwk-set-uri만 사용)
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: http://localhost:8090/realms/hamster-world/protocol/openid-connect/certs

# Keycloak Admin API 설정 (필요한 서비스만 사용)
keycloak:
  server-url: http://localhost:8090
  realm: hamster-world
  admin:
    username: admin
    password: admin
    client-id: admin-cli
