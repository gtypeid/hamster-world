spring:
  application:
    name: cash-gateway-service

  # 공통 설정 Import
  config:
    import:
      - classpath:application-kafka.yml
      - classpath:application-oauth2.yml
      - classpath:kafka-topology.yml
      - classpath:kafka-event-registry.yml

  datasource:
    url: jdbc:mysql://localhost:3307/cash_gateway_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: root
    password: 12555!@
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true

server:
  port: 8082

logging:
  level:
    root: INFO
    com.hamsterworld.payment: DEBUG
    org.hibernate.SQL: info
    org.hibernate.type.descriptor.sql.BasicBinder: info
    org.springframework.security: DEBUG  # Spring Security 디버그 로그

# PG 관련 설정
payment:
  gateway:
    dummy-pg:
      url: http://localhost:8083
      timeout: 5000
    retry:
      maxAttempts: 3
      backoffDelay: 1000
    # PG 폴링 서비스 설정
    polling:
      enabled: true  # 폴링 서비스 활성화 (기본값: false)
      fixedDelay: 5000  # 폴링 주기 (milliseconds, 기본값: 5000)
      initialDelay: 10000  # 서버 시작 후 첫 실행 대기 시간 (milliseconds, 기본값: 10000)
      batchSize: 10  # 한 번에 처리할 최대 PaymentProcess 개수 (기본값: 10)

# Outbox 프로세서 설정 (Kafka 이벤트 발행)
outbox:
  processor:
    enabled: true  # Cash Gateway는 이벤트 발행 필요
